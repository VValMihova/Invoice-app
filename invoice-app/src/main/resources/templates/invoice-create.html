<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments/head :: head"></head>
<body>
<nav th:replace="fragments/nav :: nav"></nav>
<div class="container mt-5">
  <div class="form-container">
    <h2>Create Invoice</h2>
    <form action="/invoices/create" method="post" id="invoiceForm">
      <!-- Invoice Number and Issue Date Side by Side -->
      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label for="invoiceNumber">Invoice Number:</label>
            <input type="text" id="invoiceNumber" name="invoiceNumber" class="form-control" required/>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label for="issueDate">Issue Date:</label>
            <input type="date" id="issueDate" name="issueDate" class="form-control" required/>
          </div>
        </div>
      </div>

      <!-- Supplier and Recipient Details Side by Side -->
      <div class="row">
        <!-- Supplier Details -->
        <div class="col-md-6">
          <h4>Supplier Details</h4>
          <div class="form-group">
            <label for="supplierName">Supplier Name:</label>
            <input type="text" id="supplierName" name="supplier.companyName" class="form-control"
                   th:value="${supplierDetails.companyName}" readonly/>
          </div>
          <div class="form-group">
            <label for="supplierAddress">Supplier Address:</label>
            <input type="text" id="supplierAddress" name="supplier.address" class="form-control"
                   th:value="${supplierDetails.address}" readonly/>
          </div>
          <div class="form-group">
            <label for="supplierEik">Supplier EIK:</label>
            <input type="text" id="supplierEik" name="supplier.eik" class="form-control"
                   th:value="${supplierDetails.eik}" readonly/>
          </div>
          <div class="form-group">
            <label for="supplierVatNumber">Supplier VAT Number:</label>
            <input type="text" id="supplierVatNumber" name="supplier.vatNumber" class="form-control"
                   th:value="${supplierDetails.vatNumber}" readonly/>
          </div>
          <div class="form-group">
            <label for="supplierManager">Supplier Manager:</label>
            <input type="text" id="supplierManager" name="supplier.manager" class="form-control"
                   th:value="${supplierDetails.manager}" readonly/>
          </div>
        </div>

        <!-- Recipient Details -->
        <div class="col-md-6">
          <h4>Recipient Details</h4>
          <div class="form-group">
            <label for="recipientName">Recipient Name:</label>
            <input type="text" id="recipientName" name="recipient.companyName" class="form-control" required/>
          </div>
          <div class="form-group">
            <label for="recipientAddress">Recipient Address:</label>
            <input type="text" id="recipientAddress" name="recipient.address" class="form-control" required/>
          </div>
          <div class="form-group">
            <label for="recipientEik">Recipient EIK:</label>
            <input type="text" id="recipientEik" name="recipient.eik" class="form-control" required/>
          </div>
          <div class="form-group">
            <label for="recipientVatNumber">Recipient VAT Number:</label>
            <input type="text" id="recipientVatNumber" name="recipient.vatNumber" class="form-control" required/>
          </div>
          <div class="form-group">
            <label for="recipientManager">Recipient Manager:</label>
            <input type="text" id="recipientManager" name="recipient.manager" class="form-control" required/>
          </div>
        </div>
      </div>

<!--      &lt;!&ndash; Bank Account Details &ndash;&gt;-->
<!--      <div class="row mt-3">-->
<!--        <div class="col-md-12">-->
<!--          <h4>Bank Account Details</h4>-->
<!--          <div class="form-group">-->
<!--            <label for="bankAccount">Select Bank Account:</label>-->
<!--            <select id="bankAccount" name="bankAccount.id" class="form-control" onchange="updateBankDetails(this)">-->
<!--              <option value="">Select a bank account</option>-->
<!--              <option th:each="bankAccount : ${bankAccounts}" th:value="${bankAccount.id}"-->
<!--                      th:text="${bankAccount.iban}"></option>-->
<!--            </select>-->
<!--          </div>-->
<!--        </div>-->
<!--        <div class="col-md-12">-->
<!--          <div class="form-group">-->
<!--            <label for="iban">IBAN:</label>-->
<!--            <input type="text" id="iban" name="bankAccount.iban" class="form-control" readonly/>-->
<!--          </div>-->
<!--        </div>-->
<!--        <div class="col-md-6">-->
<!--          <div class="form-group">-->
<!--            <label for="bic">BIC:</label>-->
<!--            <input type="text" id="bic" name="bankAccount.bic" class="form-control" readonly/>-->
<!--          </div>-->
<!--        </div>-->
<!--        <div class="col-md-6">-->
<!--          <div class="form-group">-->
<!--            <label for="currency">Currency:</label>-->
<!--            <input type="text" id="currency" name="bankAccount.currency" class="form-control" readonly/>-->
<!--          </div>-->
<!--        </div>-->
<!--      </div>-->

      <!-- Invoice Items -->
      <h4>Items</h4>
      <table class="table text-center">
        <thead>
        <tr>
          <th>Item Name</th>
          <th>Quantity</th>
          <th>Unit Price</th>
          <th>Total Price</th>
          <th>Actions</th>
        </tr>
        </thead>
        <tbody id="invoiceItemsContainer">
        <tr>
          <td><input type="text" name="items[0].name" placeholder="Item Name" class="form-control" required/></td>
          <td><input type="number" name="items[0].quantity" placeholder="Quantity" class="form-control"
                     oninput="calculateTotalPrice(this)" required/></td>
          <td><input type="number" name="items[0].unitPrice" placeholder="Unit Price" class="form-control"
                     oninput="calculateTotalPrice(this)" required/></td>
          <td><input type="number" name="items[0].totalPrice" placeholder="Total Price" class="form-control" readonly/>
          </td>
          <td>
            <button type="button" class="btn btn-sm btn-danger" onclick="removeInvoiceItem(this)">Remove</button>
          </td>
        </tr>
        </tbody>
      </table>
      <button type="button" class="btn btn-secondary" onclick="addInvoiceItem()">Add Item</button>

      <!-- Total Amount, VAT, and Amount Due -->
      <div class="row mt-3 justify-content-end">
        <div class="col-md-4">
          <div class="form-group">
            <label for="totalAmount">Total Amount:</label>
            <input type="number" id="totalAmount" name="totalAmount" class="form-control" readonly/>
          </div>
          <div class="form-group">
            <label for="vat">VAT (20%):</label>
            <input type="number" id="vat" name="vat" class="form-control" readonly/>
          </div>
          <div class="form-group">
            <label for="amountDue">Amount Due:</label>
            <input type="number" id="amountDue" name="amountDue" class="form-control" readonly/>
          </div>
        </div>
      </div>

      <button type="submit" class="btn btn-primary">Create Invoice</button>
    </form>
  </div>
</div>
<script src="/js/bootstrap.bundle.min.js"></script>
<script src="/js/invoice.js"></script>
</body>
</html>